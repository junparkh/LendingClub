---
layout: page
title: Understanding the Data
permalink: /menu1/
---
### Contents
{:.no_toc}
*  
{: toc}
**Description of Data:**

We downloaded the raw data from the Lending Club website. The data was structured as a large.csv.  Data was provided related to the unfunded and the funded loans. Unfortunately there was very little data provided related to the actual demographics of the borrowers.  This made performing any analyses related to either discrimination or preferential treatment impossible.

**Overview of the raw data** : There were 1,873,290 records in the data file covering a span of almost 11 years of data.  The funded data relates to loans which have been approved by the LendingClub and then funded by investors.  The unfunded data (&#39;rejected&#39;) relates to borrowing applications which had been approved by LendingClub and assigned a credit rating but not funded by investors.  The critical part of our modeling would focus on whether loan applications which were funded were actually repaid and, if they were repaid, the overall level of interest earned on these loans.  Unfortunately, the unfunded data was of little help in determining profitability as there is then no record of whether these loan applicants would or would not have repaid their loans.

[If we had been able to pursue the discrimination issue further then the unfunded data would have been a potentially interesting source of information.  We believe that the most likely point where discrimination might take place would be at the point between &quot;approved by LendingClub&quot; and &quot;funded by investors&quot;.   That said, given LendingClub&#39;s poor track record with respect to data transparency there would also have been opportunities for discrimination in the initial phase from applicant to approval by LendingClub. For more details on the ongoing litigation against Lending Club please see the section on discrimination.]

**Data Wrangling** : We concentrated the data wrangling activities within the file Data\_cleansing.ipynb.  The data wrangling can be broken down into give different parts:

1. Credit-worthiness;
2. Loan Dates;
3. Loans Profitability -\&gt; y;
4. Selecting the predictor sub-set; and
5. Saving the data as a condensed bz2 file

**(1) Credit-worthiness**: some of the key metrics needed to be adjusted to allow the dates to show up as parametric variables. These included:

- Zip code: We were provided with a three digit zip code which was all we had to go on from a demographic point of view. We created a function &quot;extract\_number&quot; which pulled the Zip Code from the data;
- Credit History: The time from the first credit line application until today represents the length of the applicant&#39;s presence within the credit scoring system. In general, longer credit histories are seen as better;
- Employment Length: Data needed to be cleansed to allow it to be continuous. Employment length is typically seen as one of the more important indicators of creditworthiness;
- Annual Income: Obviously an important credit score indicator. However, we would prefer that the applicant did not repay his or her loan early. We imputed the missing values for this predictor using the mean; and
- Credit Score: We turned the A1, B2 etc credit scores into a linear/ordinal predicator and assigned it a score from 0.0 (A1 - the best) to 6.8 (G5 - the worst). We created a function &quot;subgrade\_score&quot; which performed this parametrization of the credit score variable.

**(2) Loan Dates**: there were a number of issues around the loan dates. In particular, we needed to understand which loans were actually completed and which were still running. We decided to exclude the still running loans from our model. A couple of the key parameters are worth discussing:

- Last\_pymnt\_date: this refers strictly the last payment made rather than the date that the last payment of the loan is due. To be clear, if a loan was made in Month=1 and had a term of 36 months then the final loan payment would be due in Month=36. If we were actually in Month 10 and the most recent payment had been made then the parameter last\_pymnt\_date would record 10 not 36;
- Issue date: refers to the start date of the loan. When the money was drawn;
- Term\_months: refers to the length of the loan assuming that all payments are successfully made;

**(3) Loan Profitability**: this was by far the most difficult metric to analyse. There is a saying in the finance community that, &quot;you cannot eat APR&quot;.  This refers to the fact that if the APR (Annual Percentage Rate) charge on a loan is very high but does not last very long then you can have exceptionally large APR but no nominal return. An example serves to illustrate this point well:

Loan 1 = 100$; Term = 1 month; APR = 313%.

Loan 2 = 100$; Term = 12 months; APR = 20%.

The total cash generated by the first loan over the life of the loan is 10$. The APR is high because this 10$ was generated over a short period of time (1.1^12 =313%). On the other hand, the cash generated by the second loan is 20$ or twice as much. The total amount earned over the two loans was 30$ or an APR of 15%.

Taking averages of APRs is therefore quite tricky. To facilitate our investment strategy and modeling over such a large database we decided to exclude loans with a length less than 60 days. This is reasonable because from an operational point of view we would prefer to have longer loans – our targets are 3 or 5 year loans.  Also, we excluded APRs\&gt;100%. These occur either due to penalties or due to very short loan periods and these are not our target investments.

Completed Loans: we assigned &quot;good&quot; to those loans which were fully paid-off.

**(4) Subset Public Data**:   Primarily due to lack of data we reduced the predictors from the original data to the following:

- loan\_amnt
- term\_months
- int\_rate
- credit\_score
- emp\_length\_years
- home\_ownership
- annual\_inc
- verification\_status
- dti:  debt to interest following the LendingClub loan
- deling\_2yrs: whether the applicant had a delinquent payment in the last 2 years
- credit\_history\_years
- ing\_last\_6mths: whether there has been a credit inquiry in the past 6 months
- mths\_since\_last\_deling: months since the last delinquent payment
- mths\_since\_last\_record: months since the last public record of credit history
- pen\_acc: the number of open credit accounts in the borrower&#39;s credit file
- pub\_rec: Number of derogatory public records
- revol\_bal: total credit – revolving balance (outstanding debt)
- revol\_util\_perc: percentage of the revolving facility utilized e.g. a credit card line
- total\_acc: the total number of credit lines in the borrower&#39;s account

**(5) Save Subset**: we then used this selected subset of parameters to create a new loan file and &quot;pickled&quot; it as analysis-predictors.bz2. The target data set (y) was saved as analysis-target.bz2).

We hoped that this reduced parametric subset would allow us to run quicker models.


## Exploratory Data Analysis


### Histogram


### Scatter-matrix
